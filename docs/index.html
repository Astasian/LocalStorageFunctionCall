<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <p id="para"> </p>
        <div id="myElement"></div>
        <script src="communicator2.js" charset="utf-8"></script>
        <script>
            let lsf = new LsFunction();
            if(sessionStorage.getItem('winId') === null)
              sessionStorage.setItem('winId', Math.random());

            lsf.RegisterLocalStorageFunction("ChangePara", function(param) {
                var pa = document.getElementById("para");
                pa.innerHTML = param;
                return "Changed paragraph to "+param;
            });
            var p = document.getElementById("myElement");
            var a = document.createElement('a');
            a.setAttribute('href', "mypage.html#"+sessionStorage.getItem('winId'));
            a.setAttribute('rel', "noreferrer");
            a.setAttribute('target', "_blank");
            p.appendChild(a);
            a.click();
            
            function btnClick() {
                lsf.CallLocalStorageFunction("CloseChild", sessionStorage.getItem('winId'), function(){});
            }
            
        </script>
         <button type="button" onclick="btnClick()">Close child</button>
    </body>
</html>
